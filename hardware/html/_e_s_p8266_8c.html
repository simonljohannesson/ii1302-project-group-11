<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BodyCount: F:/Skola/KTH/II1302 Projektmetodik och utveckling/Prototyp/Doxy/ESP8266.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BodyCount
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_61fb90d36914119b963092c0e46ccd58.html">Doxy</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ESP8266.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>: ESP8266 version 01 wifi-module communicationhandler  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_e_s_p8266_8h_source.html">ESP8266.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac3146f1e9227301bb4aa518f4d336cee"><td class="memItemLeft" align="right" valign="top"><a id="ac3146f1e9227301bb4aa518f4d336cee"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BUFFERSIZE</b>&#160;&#160;&#160;4096</td></tr>
<tr class="separator:ac3146f1e9227301bb4aa518f4d336cee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad5d6bb174e93c08bc606d7d6f06ac532"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_s_p8266_8c.html#ad5d6bb174e93c08bc606d7d6f06ac532">init_uart_interrupt</a> (void)</td></tr>
<tr class="memdesc:ad5d6bb174e93c08bc606d7d6f06ac532"><td class="mdescLeft">&#160;</td><td class="mdescRight">INIT start first sequence of interupthandling.  <a href="_e_s_p8266_8c.html#ad5d6bb174e93c08bc606d7d6f06ac532">More...</a><br /></td></tr>
<tr class="separator:ad5d6bb174e93c08bc606d7d6f06ac532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81dd1e274feadd65dd03577aa5c353d2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_s_p8266_8c.html#a81dd1e274feadd65dd03577aa5c353d2">esp8266_sendCommand</a> (const char *command)</td></tr>
<tr class="memdesc:a81dd1e274feadd65dd03577aa5c353d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send command ESP8266.  <a href="_e_s_p8266_8c.html#a81dd1e274feadd65dd03577aa5c353d2">More...</a><br /></td></tr>
<tr class="separator:a81dd1e274feadd65dd03577aa5c353d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad978734c23e6518143bb383f0bca8d5b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_s_p8266_8c.html#ad978734c23e6518143bb383f0bca8d5b">esp8266_test</a> ()</td></tr>
<tr class="memdesc:ad978734c23e6518143bb383f0bca8d5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test to check ESP8266.  <a href="_e_s_p8266_8c.html#ad978734c23e6518143bb383f0bca8d5b">More...</a><br /></td></tr>
<tr class="separator:ad978734c23e6518143bb383f0bca8d5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8765f1344e57db0a3e0c798c9ac6a1fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_s_p8266_8c.html#a8765f1344e57db0a3e0c798c9ac6a1fe">resetBuffer</a> ()</td></tr>
<tr class="memdesc:a8765f1344e57db0a3e0c798c9ac6a1fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Buffer reset.  <a href="_e_s_p8266_8c.html#a8765f1344e57db0a3e0c798c9ac6a1fe">More...</a><br /></td></tr>
<tr class="separator:a8765f1344e57db0a3e0c798c9ac6a1fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad681858bb20de6101d2f411d9d4c34e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_s_p8266_8c.html#ad681858bb20de6101d2f411d9d4c34e2">esp8266_init</a> (char *SSID, uint8_t sizeSSID, char *PWD, uint8_t sizePWD)</td></tr>
<tr class="memdesc:ad681858bb20de6101d2f411d9d4c34e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">INIT for ESP8266.  <a href="_e_s_p8266_8c.html#ad681858bb20de6101d2f411d9d4c34e2">More...</a><br /></td></tr>
<tr class="separator:ad681858bb20de6101d2f411d9d4c34e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d934ec8335c15942559b37b2dcaa6f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_s_p8266_8c.html#a0d934ec8335c15942559b37b2dcaa6f0">esp8266_connect</a> (char *hostIP, uint16_t hostPort)</td></tr>
<tr class="memdesc:a0d934ec8335c15942559b37b2dcaa6f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect to this Broker.  <a href="_e_s_p8266_8c.html#a0d934ec8335c15942559b37b2dcaa6f0">More...</a><br /></td></tr>
<tr class="separator:a0d934ec8335c15942559b37b2dcaa6f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab6a74a850e1593ef468dc882cdf215a"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_s_p8266_8c.html#aab6a74a850e1593ef468dc882cdf215a">esp8266_transmit</a> (char *mqttName, uint8_t sizemqttName, char *mqttPWD, uint8_t sizemqttPWD, char *mqttPublish, uint8_t sizemqttPublish)</td></tr>
<tr class="memdesc:aab6a74a850e1593ef468dc882cdf215a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit data from ESP8266 to Broker.  <a href="_e_s_p8266_8c.html#aab6a74a850e1593ef468dc882cdf215a">More...</a><br /></td></tr>
<tr class="separator:aab6a74a850e1593ef468dc882cdf215a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebcfd4f46cf5a3406fa658f2008071fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_s_p8266_8c.html#aebcfd4f46cf5a3406fa658f2008071fa">esp8266_disconnect</a> ()</td></tr>
<tr class="memdesc:aebcfd4f46cf5a3406fa658f2008071fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnection.  <a href="_e_s_p8266_8c.html#aebcfd4f46cf5a3406fa658f2008071fa">More...</a><br /></td></tr>
<tr class="separator:aebcfd4f46cf5a3406fa658f2008071fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fdc88cab173073f3ee9d4af0b4e8c5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_s_p8266_8c.html#a7fdc88cab173073f3ee9d4af0b4e8c5f">HAL_UART_TxCpltCallback</a> (UART_HandleTypeDef *UartHandle)</td></tr>
<tr class="memdesc:a7fdc88cab173073f3ee9d4af0b4e8c5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tx Transfer completed callback.  <a href="_e_s_p8266_8c.html#a7fdc88cab173073f3ee9d4af0b4e8c5f">More...</a><br /></td></tr>
<tr class="separator:a7fdc88cab173073f3ee9d4af0b4e8c5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64a600961d9507504c5d6af42adc6c67"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_e_s_p8266_8c.html#a64a600961d9507504c5d6af42adc6c67">HAL_UART_RxCpltCallback</a> (UART_HandleTypeDef *UartHandle)</td></tr>
<tr class="memdesc:a64a600961d9507504c5d6af42adc6c67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rx Transfer completed callback.  <a href="_e_s_p8266_8c.html#a64a600961d9507504c5d6af42adc6c67">More...</a><br /></td></tr>
<tr class="separator:a64a600961d9507504c5d6af42adc6c67"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a25a82fcf0cd24eb6d39977cb5864cec8"><td class="memItemLeft" align="right" valign="top"><a id="a25a82fcf0cd24eb6d39977cb5864cec8"></a>
UART_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><b>huart5</b></td></tr>
<tr class="separator:a25a82fcf0cd24eb6d39977cb5864cec8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b2653317ef098565aa2c15e5669ec4b"><td class="memItemLeft" align="right" valign="top"><a id="a9b2653317ef098565aa2c15e5669ec4b"></a>
ITStatus&#160;</td><td class="memItemRight" valign="bottom"><b>UartReady</b> = RESET</td></tr>
<tr class="separator:a9b2653317ef098565aa2c15e5669ec4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27a994091003c71ff996330a9d96bc40"><td class="memItemLeft" align="right" valign="top"><a id="a27a994091003c71ff996330a9d96bc40"></a>
static char&#160;</td><td class="memItemRight" valign="bottom"><b>Buffer</b> [BUFFERSIZE]</td></tr>
<tr class="separator:a27a994091003c71ff996330a9d96bc40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ea9448b113d520b23dad04071401f63"><td class="memItemLeft" align="right" valign="top"><a id="a4ea9448b113d520b23dad04071401f63"></a>
static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>RX_BUFFER_INDEX</b> = 0</td></tr>
<tr class="separator:a4ea9448b113d520b23dad04071401f63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a993e08afffbcab7aacb47c1e492aea82"><td class="memItemLeft" align="right" valign="top"><a id="a993e08afffbcab7aacb47c1e492aea82"></a>
static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>rx_reciever</b></td></tr>
<tr class="separator:a993e08afffbcab7aacb47c1e492aea82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afef96784db1d5e946b11ee6a13b1b1c0"><td class="memItemLeft" align="right" valign="top"><a id="afef96784db1d5e946b11ee6a13b1b1c0"></a>
static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>error_flag</b> = 0</td></tr>
<tr class="separator:afef96784db1d5e946b11ee6a13b1b1c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab1994d5b37ee341e7eae633a7b64cd8"><td class="memItemLeft" align="right" valign="top"><a id="aab1994d5b37ee341e7eae633a7b64cd8"></a>
static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>fail_flag</b> = 0</td></tr>
<tr class="separator:aab1994d5b37ee341e7eae633a7b64cd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bd5e060f40a7b4978010fb17569c74f"><td class="memItemLeft" align="right" valign="top"><a id="a6bd5e060f40a7b4978010fb17569c74f"></a>
static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>busy_flag</b> = 0</td></tr>
<tr class="separator:a6bd5e060f40a7b4978010fb17569c74f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>: ESP8266 version 01 wifi-module communicationhandler </p>
<dl class="section author"><dt>Author</dt><dd>Tobias Mesch </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2021-05-20</dd></dl>
<p>Functions and structures for handling Communication with ESP8266-01 </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a0d934ec8335c15942559b37b2dcaa6f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d934ec8335c15942559b37b2dcaa6f0">&#9670;&nbsp;</a></span>esp8266_connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void esp8266_connect </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>hostIP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>hostPort</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connect to this Broker. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hostIP</td><td>This is the brokers IP-adress </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Connect to broker at IP adress on this port.</dd></dl>
<p>Ping to host begins, if not successful read flag Next start up a TCP link to broker</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aebcfd4f46cf5a3406fa658f2008071fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebcfd4f46cf5a3406fa658f2008071fa">&#9670;&nbsp;</a></span>esp8266_disconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void esp8266_disconnect </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disconnection. </p>
<dl class="section note"><dt>Note</dt><dd>Send AT msg close, this terminates TCP link to host. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad681858bb20de6101d2f411d9d4c34e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad681858bb20de6101d2f411d9d4c34e2">&#9670;&nbsp;</a></span>esp8266_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void esp8266_init </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>SSID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>sizeSSID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>PWD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>sizePWD</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>INIT for ESP8266. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SSID</td><td>This is routers address </td></tr>
    <tr><td class="paramname">sizeSSID</td><td>size of SSID </td></tr>
    <tr><td class="paramname">PWD</td><td>This is the password to connect to the router </td></tr>
    <tr><td class="paramname">sizePWD</td><td>size of PWD </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This initiates the ESP8266 communication with selected router</dd></dl>
<p>Wait for ESP8266 to be ready to receive msg from MCU. Optional reset Set stationarymode Optional read mode Set loginvalues to router Optional test login successful</p>
<p>See flags if error occurred Automation could be improved for smoother connection-phase</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a81dd1e274feadd65dd03577aa5c353d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81dd1e274feadd65dd03577aa5c353d2">&#9670;&nbsp;</a></span>esp8266_sendCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int esp8266_sendCommand </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send command ESP8266. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">command</td><td>What command should be send to the module </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>A command is issued and send over Tx/Rx UART to the wifi-module.</dd></dl>
<p>Clear bufferarray Transmit command over UART Wait for buffer to fill out When certain phrase are met issue this command (at best "OK") OK means transmission was successful See flags if error occurred </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>| 1 for success or not success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad978734c23e6518143bb383f0bca8d5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad978734c23e6518143bb383f0bca8d5b">&#9670;&nbsp;</a></span>esp8266_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void esp8266_test </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test to check ESP8266. </p>
<dl class="section note"><dt>Note</dt><dd>This sends AT command to make sure connection is established between hardware MCU + ESP8266 See flags if error occured </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aab6a74a850e1593ef468dc882cdf215a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab6a74a850e1593ef468dc882cdf215a">&#9670;&nbsp;</a></span>esp8266_transmit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* esp8266_transmit </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>mqttName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>sizemqttName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>mqttPWD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>sizemqttPWD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>mqttPublish</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>sizemqttPublish</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transmit data from ESP8266 to Broker. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mqttName</td><td>This should be the username for AUTH </td></tr>
    <tr><td class="paramname">sizemqttName</td><td>Size of mqttName </td></tr>
    <tr><td class="paramname">mqttPWD</td><td>This should be the password for AUTH </td></tr>
    <tr><td class="paramname">sizemqttPWD</td><td>Size of mqttPWD </td></tr>
    <tr><td class="paramname">mqttPublish</td><td>This is the topic where data is published to </td></tr>
    <tr><td class="paramname">sizemqttPublish</td><td>Size of mqttPublish </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Ideally this would be fully operating transmission of data to broker.</dd></dl>
<p>For now ping to host works TCP link to host seems to work MQTT msg is not properly made, msg does not deliver to broker Automation for UTF-8 encoding needs to implement Functional rec of ack-packet does not exist Errorhandling needs improvement</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">OK</td><td>| Error - Operationalflag successful or not </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a64a600961d9507504c5d6af42adc6c67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64a600961d9507504c5d6af42adc6c67">&#9670;&nbsp;</a></span>HAL_UART_RxCpltCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HAL_UART_RxCpltCallback </td>
          <td>(</td>
          <td class="paramtype">UART_HandleTypeDef *&#160;</td>
          <td class="paramname"><em>UartHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rx Transfer completed callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">UartHandle</td><td>UART handle </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>When message arrives put it into BufferArray and increase pointer. Clear flag and resume listening </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7fdc88cab173073f3ee9d4af0b4e8c5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fdc88cab173073f3ee9d4af0b4e8c5f">&#9670;&nbsp;</a></span>HAL_UART_TxCpltCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HAL_UART_TxCpltCallback </td>
          <td>(</td>
          <td class="paramtype">UART_HandleTypeDef *&#160;</td>
          <td class="paramname"><em>UartHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tx Transfer completed callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">UartHandle</td><td>UART handle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Set UartReady as transfer completed </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad5d6bb174e93c08bc606d7d6f06ac532"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5d6bb174e93c08bc606d7d6f06ac532">&#9670;&nbsp;</a></span>init_uart_interrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_uart_interrupt </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>INIT start first sequence of interupthandling. </p>
<dl class="section note"><dt>Note</dt><dd>Sets the rx_Callback ready to recieve data </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8765f1344e57db0a3e0c798c9ac6a1fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8765f1344e57db0a3e0c798c9ac6a1fe">&#9670;&nbsp;</a></span>resetBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void resetBuffer </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Buffer reset. </p>
<dl class="section note"><dt>Note</dt><dd>This clears the buffer for receiving msg </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
